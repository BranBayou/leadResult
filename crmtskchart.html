<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <title>CRM-Tasks-Chart</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Side Navbar Starts-->
    <div class="sidebar sidebar-only-icon">
        <form name="" method="" action="" id="">
            <div class="sidebar-logo">
                <div id="lbLogo">
                    <img src="/assets/logoImage1.svg" alt="LeadResult-Logo" class="sidebar-logo-img" />
                    <div class="logo-text-div">
                        <h1 class="sidebar-logo-img sidebar-logo-img2 hidden" style="opacity: 0; transition: opacity 0.3s">
                            LeadResult
                        </h1>
                        <p class="sidebar-logo-img sidebar-logo-img2 hidden" style="opacity: 0; transition: opacity 0.3s">
                            DRIVING CUSTOMER RESPONSE
                        </p>
                    </div>
                </div>
            </div>
            <div class="menu">
                <div class="menu-item">
                    <a id="nScheduler" title="Scheduling" class="menu-link icon-only-menu" href='' data-target="smScheduler">
                        <img class="menu-icon main-menu-icon" src="assets/oper2024Icons/dashboard-1.svg" style="border-width: 0px" />
                        <span class="menu-text hidden" style="opacity: 0; transition: opacity 0.3s;">Scheduling</span></a>
                    <div id="smScheduler" class="submenu hidden2">
                        <a id="nSchedulerSchedulerUnifiedSearch" title="Appointments"
                            class="submenu-item icon-only-sub-menu" href=''>
                            <img class="menu-icon sub-menu-icon" src="assets/oper2024Icons/appointmnt-1.svg" style="border-width: 0px" />
                            <span class="menu-text hidden" style="opacity: 0; transition: opacity 0.3s">Appointments</span></a>
                        <a id="nSchedulerSchedulerAppointmentCalendar" title="Appointment Calendar"
                            class="submenu-item icon-only-sub-menu" href=''>
                            <img class="menu-icon sub-menu-icon" src="assets/oper2024Icons/apptstatus-1.svg" style="border-width: 0px" /><span
                                class="menu-text hidden" style="opacity: 0; transition: opacity 0.3s">Calendar</span></a>
                    </div>
                </div>
                <div class="menu-item">
                    <a id="nCRM" title="CRM" class="menu-link icon-only-menu" href='' data-target="smCRM">
                        <img class="menu-icon main-menu-icon" src="assets/oper2024Icons/crm-1.svg" style="border-width: 0px" /><span
                            class="menu-text hidden" style="opacity: 0; transition: opacity 0.3s">CRM</span></a>
                    <div id="smCRM" class="submenu hidden2">
                        <a id="nCRMCRMTasks" title="Tasks" class="submenu-item icon-only-sub-menu"
                            href=''><img
                                class="menu-icon sub-menu-icon" src="assets/oper2024Icons/Tasks-1.svg" style="border-width: 0px" /><span
                                class="menu-text hidden" style="opacity: 0; transition: opacity 0.3s">Tasks</span></a>
                        <a id="nCRMCRMReports" title="Reports" class="submenu-item icon-only-sub-menu"
                            href=''><img
                                class="menu-icon sub-menu-icon" src="assets/oper2024Icons/Reports-1.svg" style="border-width: 0px" /><span
                                class="menu-text hidden" style="opacity: 0; transition: opacity 0.3s">Reports</span></a>
                    </div>
                </div>
                <div class="menu-item" data-target="">
                    <a id="nTextPro" title="Text Pro" class="menu-link icon-only-menu"href=''>
                        <img class="menu-icon main-menu-icon" src="assets/oper2024Icons/text_pro-1.svg" style="border-width: 0px" /><span
                            class="menu-text hidden" style="opacity: 0; transition: opacity 0.3s">Text Pro</span></a>
                </div>
                <div class="menu-item" data-target="">
                    <a id="nSchedulerDNC" title="DNC" class="menu-link icon-only-menu" href=''>
                        <img class="menu-icon main-menu-icon" src="assets/oper2024Icons/dnc-1.svg" style="border-width: 0px" /><span
                            class="menu-text hidden" style="opacity: 0; transition: opacity 0.3s">DNC</span></a>
                </div>
                <div class="menu-item" data-target="">
                    <a id="nLogout" title="Logout" class="menu-link icon-only-menu" href=''>
                        <img class="menu-icon main-menu-icon" src="assets/oper2024Icons/Logout-1.svg" style="border-width: 0px" /><span
                            class="menu-text hidden" style="opacity: 0; transition: opacity 0.3s">Logout</span></a>
                </div>
            </div>
        </form>
    </div>
    <!-- Side Navbar Ends-->

    <!-- Main Content Starts-->
    <main>
        <header>
            <div class="header-left">
                <img src="assets/menu1.svg" alt="header-button">
                <p>Welcome, Brain Parente <span>(Madison Honda)</span></p>
            </div>
            <div class="header-right">
                <button class="switch-store-button">
                    <span>Switch Store</span>
                    <img src="assets/arrowDown.svg" alt="arrow-down">
                </button>
                <button class="prev-arrow-button">
                    <img src="assets/prevArrow.svg" alt="prev-arrow">
                </button>
                <button class="next-arrow-button">
                    <img src="assets/nextArrow.svg" alt="next-arrow">
                </button>
            </div>
        </header>
        
        <section class="main-section-top">
            <h1>Reports</h1>
            <div class="main-section-buttons-div">
                <button class="main-section-button-search">Task Stats</button>
                <button class="main-section-button-tasks">Task Charts</button>
                <button class="main-section-button-search">Unified Reports</button>
                <button class="main-section-button-search">Success Reports</button>
                <button class="main-section-button-manual">Call Details</button>
            </div>
        </section>

        <section class="success-report-show-div">
            <p>Success report for</p>
            <div class="report-filter-div">
                <input type="text" id="date-picker" placeholder="Select Date & Time">
                <img src="assets/calendar.svg" alt="">
            </div>
        </section>

        <section class="pichart-section">
            <div class="chart-title">
                <h1>Outcomes By Operator</h1>
            </div>
            
            <div class="task-charts-div">
                <div class="chart-main-con">
                    <div class="dount-chart-container">
                        <div class="donut-chart"></div>
                        <div class="segment-tooltip"></div>
                    </div>
                    <div class="chart-name">
                        <p>Hawen Brown</p>
                    </div>
                </div>
                <div class="chart-main-con">
                    <div class="dount-chart-container">
                        <div class="donut-chart"></div>
                        <div class="segment-tooltip"></div>
                    </div>
                    <div class="chart-name">
                        <p>Hawen Brown</p>
                    </div>
                </div>
                <div class="chart-main-con">
                    <div class="dount-chart-container">
                        <div class="donut-chart"></div>
                        <div class="segment-tooltip"></div>
                    </div>
                    <div class="chart-name">
                        <p>Hawen Brown</p>
                    </div>
                </div>
                <div class="chart-main-con">
                    <div class="dount-chart-container">
                        <div class="donut-chart"></div>
                        <div class="segment-tooltip"></div>
                    </div>
                    <div class="chart-name">
                        <p>Hawen Brown</p>
                    </div>
                    <div class="segment-tooltip" id="tooltip"></div>
                </div>
                <button class="nav-buttons next-button"><img src="assets/nextArrow.svg" alt=""></button>
                <button class="nav-buttons prev-button"><img src="assets/prevArrow.svg" alt=""></button>
            </div>
            
        </section>

        <section class="column-chart-section">
            <div class="column-chart-div">
                <div class="chart-title-bottom">
                    <p>Taskes Completed By Message</p>
                </div>
                <div class="graph-container">
                    <div class="bar">
                        <div class="bar-label">Work due</div>
                        <div class="bar-track">
                            <div class="bar-fill fill-orange" style="--bar-width: 80%;"></div>
                        </div>
                    </div>
            
                    <div class="bar">
                        <div class="bar-label">Service - No Show</div>
                        <div class="bar-track">
                            <div class="bar-fill fill-dark" style="--bar-width: 60%;"></div>
                        </div>
                    </div>
            
                    <div class="bar">
                        <div class="bar-label">Reminder of Free of Charges</div>
                        <div class="bar-track">
                            <div class="bar-fill fill-blue" style="--bar-width: 90%;"></div>
                        </div>
                    </div>
            
                    <div class="bar">
                        <div class="bar-label">Service-First Service Appt(5mo)</div>
                        <div class="bar-track">
                            <div class="bar-fill fill-green" style="--bar-width: 70%;"></div>
                        </div>
                    </div>
                    <div class="bar">
                        <div class="bar-label">Service-Closed</div>
                        <div class="bar-track">
                            <div class="bar-fill fill-yellow" style="--bar-width: 45%;"></div>
                        </div>
                    </div>
                    <div class="bar">
                        <div class="bar-label">Expiry of Charges</div>
                        <div class="bar-track">
                            <div class="bar-fill fill-gray" style="--bar-width: 30%;"></div>
                        </div>
                    </div>
            
                    <div class="percentage-scale">
                        <span>00%</span>
                        <span>20%</span>
                        <span>40%</span>
                        <span>60%</span>
                        <span>80%</span>
                        <span>100%</span>
                    </div>
                </div>
            </div>
            <div class="column-chart-div">
                <div class="chart-title-bottom">
                    <p>Taskes Completed By Operator</p>
                </div>
                <div class="graph-container2">
                    <div class="y-axis2">
                        <span>100%  <span class="line"><img src="assets/line.svg" alt=""></span></span>
                        <span>80%<span class="line"><img src="assets/line.svg" alt=""></span></span>
                        <span>60%<span class="line"><img src="assets/line.svg" alt=""></span></span>
                        <span>40%<span class="line"><img src="assets/line.svg" alt=""></span></span>
                        <span>20%<span class="line"><img src="assets/line.svg" alt=""></span></span>
                        <span>00%<span class="line"><img src="assets/line.svg" alt=""></span></span>
                    </div>
                    <div class="columns-container2">
                        <div class="columns2">
                            <div class="column2"></div>
                            <div class="column2"></div>
                            <div class="column2"></div>
                        </div>
                        <div class="column-names">
                            <span class="column-label">Hawen Brown</span>
                            <span class="column-label">Shawen Lather</span>
                            <span class="column-label">Aline Gunzam</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>
    <!-- Main Content Ends-->

<script type="text/javascript" src="main.js"></script>
<script type="text/javascript">
        const donutCharts = document.querySelectorAll('.donut-chart');
const globalTooltip = document.getElementById('tooltip');
const piChartSection = document.querySelector('.pichart-section');
const navButtons = document.querySelectorAll('.nav-buttons');

// Segment data
const segmentsData = [
  { start: 0, end: 10, label: "Green (10%)" },
  { start: 11, end: 25, label: "Orange (14%)" },
  { start: 26, end: 70, label: "Yellow (44%)" },
  { start: 71, end: 95, label: "Blue (24%)" },
  { start: 96, end: 100, label: "Green (4%)" }
];

donutCharts.forEach((chart) => {
  chart.addEventListener('mousemove', (event) => {
    const rect = chart.getBoundingClientRect();
    const centerX = rect.left + rect.width / 2;
    const centerY = rect.top + rect.height / 2;

    // Calculate the angle
    const x = event.clientX - centerX;
    const y = event.clientY - centerY;
    let angle = Math.atan2(y, x) * (180 / Math.PI);
    angle = (angle + 360 + 90) % 360;

    // Find the segment
    const percentage = (angle / 360) * 100;
    const segment = segmentsData.find(seg => percentage >= seg.start && percentage <= seg.end);

    if (segment) {
      // Show the tooltip
      globalTooltip.style.display = 'block';
      globalTooltip.textContent = segment.label;

      // Position tooltip near mouse
      globalTooltip.style.left = `${event.pageX + 10}px`;
      globalTooltip.style.top = `${event.pageY + 10}px`;

      // Remove position: relative from piChartSection on hover
      piChartSection.style.position = 'static'; // Removes relative positioning

      // Hide navigation buttons by looping through them
      navButtons.forEach(button => {
        button.style.display = 'none';
      });
    }
  });

  chart.addEventListener('mouseleave', () => {
    // Hide tooltip when leaving the chart
    globalTooltip.style.display = 'none';

    // Restore position: relative on piChartSection when mouse leaves
    piChartSection.style.position = 'relative';

    // Show navigation buttons again by looping through them
    navButtons.forEach(button => {
      button.style.display = 'flex';
    });
  });
});

// Event listeneer for dount charts scroll //
const chartsDiv = document.querySelector('.task-charts-div');
const nextButton = document.querySelector('.next-button');
const prevButton = document.querySelector('.prev-button');

const scrollAmount = 300;

// Scroll to the right
nextButton.addEventListener('click', () => {
  chartsDiv.scrollBy({ left: scrollAmount, behavior: 'smooth' });
});

// Scroll to the left
prevButton.addEventListener('click', () => {
  chartsDiv.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
});

const dateInput = document.getElementById('date-picker');

    dateInput.addEventListener('focus', () => {
        // Change input type to date on focus
        dateInput.type = 'date';
    });

    dateInput.addEventListener('blur', () => {
        // Reset type back to text if the value is empty
        if (!dateInput.value) {
            dateInput.type = 'text';
        }
    })
    </script>
</body>
</html>